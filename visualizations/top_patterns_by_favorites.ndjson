{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"Top patterns by favorites","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Top patterns by favorites\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\n  $schema: https://vega.github.io/schema/vega/v5.json\\n  description: A top-k bar chart ranking film directors by revenue, including an aggregate others category.\\n  padding: 5\\n  autosize: fit\\n  data: [\\n    {\\n      name: source\\n      url: {\\n        index: patterns\\n        body: {\\n          size: 0\\n          query: {\\n            bool: {\\n              must_not: {\\n                exists: {\\n                  field: pattern_author.users.user_sites\\n                }\\n              }\\n            }\\n          }\\n          aggs: {\\n            top: {\\n              top_hits: {\\n                sort: [\\n                  {\\n                    favorites_count: {\\n                      order: desc\\n                    }\\n                  }\\n                ]\\n                _source: {\\n                  includes: [\\n                    name\\n                    favorites_count\\n                  ]\\n                }\\n                size: 10\\n              }\\n            }\\n          }\\n        }\\n      }\\n      transform: [\\n        {\\n          type: flatten\\n          fields: [\\n            hits\\n          ]\\n        }\\n        {\\n          type: project\\n          fields: [\\n            hits._source.name\\n            hits._source.favorites_count\\n          ]\\n          as: [\\n            name\\n            favorites_count\\n          ]\\n        }\\n      ]\\n      format: {\\n        property: aggregations.top.hits\\n      }\\n    }\\n  ]\\n  marks: [\\n    {\\n      type: rect\\n      from: {\\n        data: source\\n      }\\n      encode: {\\n        update: {\\n          x: {\\n            scale: x\\n            value: 0\\n          }\\n          x2: {\\n            scale: x\\n            field: favorites_count\\n          }\\n          y: {\\n            scale: y\\n            field: name\\n          }\\n          height: {\\n            scale: y\\n            band: 1\\n          }\\n        }\\n      }\\n    }\\n  ]\\n  scales: [\\n    {\\n      name: x\\n      type: linear\\n      domain: {\\n        data: source\\n        field: favorites_count\\n      }\\n      range: width\\n      nice: true\\n    }\\n    {\\n      name: y\\n      type: band\\n      domain: {\\n        data: source\\n        field: name\\n        sort: {\\n          op: max\\n          field: favorites_count\\n          order: descending\\n        }\\n      }\\n      range: height\\n      padding: 0.1\\n    }\\n  ]\\n  axes: [\\n    {\\n      scale: x\\n      orient: bottom\\n      tickCount: 5\\n    }\\n    {\\n      scale: y\\n      orient: left\\n    }\\n  ]\\n}\"}}"},"coreMigrationVersion":"7.14.1","id":"11c8b150-41a4-11ec-a325-b1c588af65fd","migrationVersion":{"visualization":"7.14.0"},"references":[],"type":"visualization","updated_at":"2021-11-09T21:29:07.046Z","version":"WzQwMiwyXQ=="}
{"excludedObjects":[],"excludedObjectsCount":0,"exportedCount":1,"missingRefCount":0,"missingReferences":[]}