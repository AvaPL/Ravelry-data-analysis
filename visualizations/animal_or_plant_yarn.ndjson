{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"animal_or_plant_yarn","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"animal_or_plant_yarn\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega-lite/v5.json\\\",\\n  \\\"title\\\": \\\"Percentage of animal based yarns\\\",\\n  \\\"data\\\": {\\n    \\\"name\\\": \\\"table\\\",\\n    \\\"url\\\": {\\n      \\\"index\\\": \\\"yarns\\\",\\n      \\\"body\\\": {\\n        \\\"size\\\": 0,\\n        \\\"aggs\\\": {\\n          \\\"animal\\\": {\\\"terms\\\": {\\\"field\\\": \\\"yarn_fibers.fiber_type.animal_fiber\\\"}}\\n        }\\n      }\\n    },\\n    \\\"format\\\": {\\\"property\\\": \\\"aggregations.animal.buckets\\\"}\\n  },\\n  \\\"transform\\\": [\\n    {\\n      \\\"calculate\\\": \\\"datum.key == 0 ? 'Plant Fiber' : 'Animal Fiber'\\\",\\n      \\\"as\\\": \\\"animal\\\"\\n    },\\n    {\\n      \\\"window\\\": [{\\\"op\\\": \\\"sum\\\", \\\"field\\\": \\\"doc_count\\\", \\\"as\\\": \\\"total\\\"}],\\n      \\\"frame\\\": [null, null]\\n    },\\n    {\\\"calculate\\\": \\\"datum.doc_count/datum.total * 100\\\", \\\"as\\\": \\\"percent\\\"},\\n    {\\n      \\\"calculate\\\": \\\"replace(datum.percent, /(\\\\\\\\.\\\\\\\\d{2}).*/, '$1') + '%'\\\",\\n      \\\"as\\\": \\\"percent_label\\\"\\n    }\\n  ],\\n  \\\"layer\\\": [\\n    {\\\"mark\\\": {\\\"type\\\": \\\"arc\\\", \\\"innerRadius\\\": 50, \\\"radius\\\": 220, \\\"stroke\\\": \\\"#fff\\\"}},\\n    {\\n      \\\"mark\\\": {\\\"type\\\": \\\"text\\\", \\\"radius\\\": 280, \\\"fontSize\\\": 15},\\n      \\\"encoding\\\": {\\\"text\\\": {\\\"field\\\": \\\"animal\\\", \\\"type\\\": \\\"nominal\\\"}}\\n    },\\n    {\\n      \\\"mark\\\": {\\\"type\\\": \\\"text\\\" ,\\n      \\\"radius\\\": 130,\\n      \\\"fontSize\\\": 18},\\n      \\\"encoding\\\": {\\\"text\\\": {\\\"field\\\": \\\"percent_label\\\", \\\"type\\\": \\\"nominal\\\",\\n      },\\n      \\\"color\\\": {\\\"value\\\": \\\"#FFFFFF\\\"},\\n      }\\n    }\\n \\n  ],\\n  \\\"encoding\\\": {\\n    \\\"theta\\\": {\\\"field\\\": \\\"percent\\\", \\\"type\\\": \\\"quantitative\\\", \\\"stack\\\": true},\\n    \\\"color\\\": {\\\"field\\\": \\\"percent\\\", \\\"type\\\": \\\"nominal\\\", \\\"legend\\\": null, \\n    \\\"scale\\\": { \\\"range\\\": [\\\"#74BF0F\\\", \\\"#E46E30\\\"] },}\\n  }\\n}\"}}"},"coreMigrationVersion":"7.14.1","id":"7d4d5410-3fd0-11ec-a918-b3e137374875","migrationVersion":{"visualization":"7.14.0"},"references":[],"type":"visualization","updated_at":"2021-11-09T19:47:01.070Z","version":"WzMwMjEsNV0="}
{"excludedObjects":[],"excludedObjectsCount":0,"exportedCount":1,"missingRefCount":0,"missingReferences":[]}